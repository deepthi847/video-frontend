{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"E:\\\\Documents\\\\Downloads\\\\insta-reels-master\\\\insta-reels-master\\\\App\\\\Screens\\\\Home.js\";\n\nimport React, { useState, useRef, useContext } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport { FeedRow } from \"../Component/FeedRow\";\nimport { AppContext } from \"../Context\";\nimport CommonStyle from \"../Theme/CommonStyle\";\nimport { height, isIOS } from \"../Utils/Constant\";\nimport { data } from \"../Utils/data\";\n\nvar Home = function Home() {\n  var _useContext = useContext(AppContext),\n      displayHeight = _useContext.displayHeight,\n      setDisplayHeight = _useContext.setDisplayHeight;\n\n  var refFlatList = useRef();\n\n  var _useState = useState(new Animated.Value(0)),\n      _useState2 = _slicedToArray(_useState, 1),\n      scrollY = _useState2[0];\n\n  var _useState3 = useState({\n    isViewable: true,\n    index: 0\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      scrollInfo = _useState4[0],\n      setScrollInfo = _useState4[1];\n\n  var viewabilityConfig = {\n    viewAreaCoveragePercentThreshold: 80\n  };\n  var onViewableItemsChanged = useRef(function (viewableItems) {\n    var info = {\n      isViewable: viewableItems.changed[0].isViewable,\n      index: viewableItems.changed[0].index\n    };\n    setScrollInfo(info);\n  });\n\n  var transitionAnimation = function transitionAnimation(index) {\n    var rowHeight = displayHeight * index;\n    return {\n      opacity: scrollY.interpolate({\n        inputRange: [rowHeight, rowHeight + displayHeight / 2, rowHeight + displayHeight],\n        outputRange: [1, 0.2, 0],\n        useNativeDriver: true,\n        extrapolate: 'clamp'\n      })\n    };\n  };\n\n  var getItemLayout = function getItemLayout(item, index) {\n    return {\n      length: displayHeight,\n      offset: displayHeight * index,\n      index: index\n    };\n  };\n\n  var onLayout = function onLayout(_ref) {\n    var nativeEvent = _ref.nativeEvent;\n    setDisplayHeight(!isIOS && nativeEvent.layout.height || height);\n  };\n\n  var onEndReached = function onEndReached() {};\n\n  var keyExtractor = function keyExtractor(item, index) {\n    return \"\" + item.id;\n  };\n\n  var renderItem = function renderItem(_ref2) {\n    var item = _ref2.item,\n        index = _ref2.index;\n    var scrollIndex = (scrollInfo == null ? void 0 : scrollInfo.index) || 0;\n    var isNext = index >= scrollIndex - 1 && index <= scrollIndex + 1;\n    return React.createElement(FeedRow, {\n      item: item,\n      isNext: isNext,\n      index: index,\n      transitionAnimation: transitionAnimation,\n      visible: scrollInfo,\n      isVisible: scrollIndex === index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 7\n      }\n    });\n  };\n\n  return React.createElement(View, {\n    style: CommonStyle.flexContainer,\n    onLayout: onLayout,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }, React.createElement(Animated.FlatList, {\n    pagingEnabled: true,\n    showsVerticalScrollIndicator: false,\n    ref: refFlatList,\n    automaticallyAdjustContentInsets: true,\n    onViewableItemsChanged: onViewableItemsChanged.current,\n    viewabilityConfig: viewabilityConfig,\n    onScroll: Animated.event([{\n      nativeEvent: {\n        contentOffset: {\n          y: scrollY\n        }\n      }\n    }], {\n      useNativeDriver: false\n    }),\n    data: data,\n    renderItem: renderItem,\n    getItemLayout: getItemLayout,\n    keyExtractor: keyExtractor,\n    onEndReachedThreshold: 20,\n    onEndReached: onEndReached,\n    removeClippedSubviews: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default Home;","map":{"version":3,"names":["React","useState","useRef","useContext","FeedRow","AppContext","CommonStyle","height","isIOS","data","Home","displayHeight","setDisplayHeight","refFlatList","Animated","Value","scrollY","isViewable","index","scrollInfo","setScrollInfo","viewabilityConfig","viewAreaCoveragePercentThreshold","onViewableItemsChanged","viewableItems","info","changed","transitionAnimation","rowHeight","opacity","interpolate","inputRange","outputRange","useNativeDriver","extrapolate","getItemLayout","item","length","offset","onLayout","nativeEvent","layout","onEndReached","keyExtractor","id","renderItem","scrollIndex","isNext","flexContainer","current","event","contentOffset","y"],"sources":["E:/Documents/Downloads/insta-reels-master/insta-reels-master/App/Screens/Home.js"],"sourcesContent":["import React, {useState, useRef, useContext} from 'react';\nimport {View, Animated} from 'react-native';\nimport {FeedRow} from '../Component/FeedRow';\nimport {AppContext} from '../Context';\nimport CommonStyle from '../Theme/CommonStyle';\nimport {height, isIOS} from '../Utils/Constant';\nimport {data} from '../Utils/data';\n\nconst Home = () => {\n  const {displayHeight, setDisplayHeight} = useContext(AppContext);\n  const refFlatList = useRef();\n  const [scrollY] = useState(new Animated.Value(0));\n  const [scrollInfo, setScrollInfo] = useState({isViewable: true, index: 0});\n\n  const viewabilityConfig = {viewAreaCoveragePercentThreshold: 80};\n  const onViewableItemsChanged = useRef(viewableItems => {\n    const info = {\n      isViewable: viewableItems.changed[0].isViewable,\n      index: viewableItems.changed[0].index,\n    };\n    setScrollInfo(info);\n  });\n\n  const transitionAnimation = index => {\n    const rowHeight = displayHeight * index;\n    return {\n      opacity: scrollY.interpolate({\n        inputRange: [\n          rowHeight,\n          rowHeight + displayHeight / 2,\n          rowHeight + displayHeight,\n        ],\n        outputRange: [1, 0.2, 0],\n        useNativeDriver: true,\n        extrapolate: 'clamp',\n      }),\n    };\n  };\n\n  const getItemLayout = (item, index) => ({\n    length: displayHeight,\n    offset: displayHeight * index,\n    index,\n  });\n\n  const onLayout = ({nativeEvent}) => {\n    setDisplayHeight((!isIOS && nativeEvent.layout.height) || height);\n  };\n\n  const onEndReached = () => {\n    // make api call here\n  };\n\n  const keyExtractor = (item, index) => {\n    return `${item.id}`;\n  };\n\n  const renderItem = ({item, index}) => {\n    const scrollIndex = scrollInfo?.index || 0;\n    const isNext = index >= scrollIndex - 1 && index <= scrollIndex + 1;\n    return (\n      <FeedRow\n        item={item}\n        isNext={isNext}\n        index={index}\n        transitionAnimation={transitionAnimation}\n        visible={scrollInfo}\n        isVisible={scrollIndex === index}\n      />\n    );\n  };\n\n  return (\n    <View style={CommonStyle.flexContainer} onLayout={onLayout}>\n      <Animated.FlatList\n        pagingEnabled\n        showsVerticalScrollIndicator={false}\n        ref={refFlatList}\n        automaticallyAdjustContentInsets={true}\n        onViewableItemsChanged={onViewableItemsChanged.current}\n        viewabilityConfig={viewabilityConfig}\n        onScroll={Animated.event(\n          [\n            {\n              nativeEvent: {contentOffset: {y: scrollY}},\n            },\n          ],\n          {\n            useNativeDriver: false,\n          },\n        )}\n        data={data}\n        renderItem={renderItem}\n        getItemLayout={getItemLayout}\n        keyExtractor={keyExtractor}\n        onEndReachedThreshold={20}\n        onEndReached={onEndReached}\n        removeClippedSubviews={true}\n      />\n    </View>\n  );\n};\n\nexport default Home;\n"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,MAAzB,EAAiCC,UAAjC,QAAkD,OAAlD;;;AAEA,SAAQC,OAAR;AACA,SAAQC,UAAR;AACA,OAAOC,WAAP;AACA,SAAQC,MAAR,EAAgBC,KAAhB;AACA,SAAQC,IAAR;;AAEA,IAAMC,IAAI,GAAG,SAAPA,IAAO,GAAM;EACjB,kBAA0CP,UAAU,CAACE,UAAD,CAApD;EAAA,IAAOM,aAAP,eAAOA,aAAP;EAAA,IAAsBC,gBAAtB,eAAsBA,gBAAtB;;EACA,IAAMC,WAAW,GAAGX,MAAM,EAA1B;;EACA,gBAAkBD,QAAQ,CAAC,IAAIa,QAAQ,CAACC,KAAb,CAAmB,CAAnB,CAAD,CAA1B;EAAA;EAAA,IAAOC,OAAP;;EACA,iBAAoCf,QAAQ,CAAC;IAACgB,UAAU,EAAE,IAAb;IAAmBC,KAAK,EAAE;EAA1B,CAAD,CAA5C;EAAA;EAAA,IAAOC,UAAP;EAAA,IAAmBC,aAAnB;;EAEA,IAAMC,iBAAiB,GAAG;IAACC,gCAAgC,EAAE;EAAnC,CAA1B;EACA,IAAMC,sBAAsB,GAAGrB,MAAM,CAAC,UAAAsB,aAAa,EAAI;IACrD,IAAMC,IAAI,GAAG;MACXR,UAAU,EAAEO,aAAa,CAACE,OAAd,CAAsB,CAAtB,EAAyBT,UAD1B;MAEXC,KAAK,EAAEM,aAAa,CAACE,OAAd,CAAsB,CAAtB,EAAyBR;IAFrB,CAAb;IAIAE,aAAa,CAACK,IAAD,CAAb;EACD,CANoC,CAArC;;EAQA,IAAME,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAAT,KAAK,EAAI;IACnC,IAAMU,SAAS,GAAGjB,aAAa,GAAGO,KAAlC;IACA,OAAO;MACLW,OAAO,EAAEb,OAAO,CAACc,WAAR,CAAoB;QAC3BC,UAAU,EAAE,CACVH,SADU,EAEVA,SAAS,GAAGjB,aAAa,GAAG,CAFlB,EAGViB,SAAS,GAAGjB,aAHF,CADe;QAM3BqB,WAAW,EAAE,CAAC,CAAD,EAAI,GAAJ,EAAS,CAAT,CANc;QAO3BC,eAAe,EAAE,IAPU;QAQ3BC,WAAW,EAAE;MARc,CAApB;IADJ,CAAP;EAYD,CAdD;;EAgBA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,IAAD,EAAOlB,KAAP;IAAA,OAAkB;MACtCmB,MAAM,EAAE1B,aAD8B;MAEtC2B,MAAM,EAAE3B,aAAa,GAAGO,KAFc;MAGtCA,KAAK,EAALA;IAHsC,CAAlB;EAAA,CAAtB;;EAMA,IAAMqB,QAAQ,GAAG,SAAXA,QAAW,OAAmB;IAAA,IAAjBC,WAAiB,QAAjBA,WAAiB;IAClC5B,gBAAgB,CAAE,CAACJ,KAAD,IAAUgC,WAAW,CAACC,MAAZ,CAAmBlC,MAA9B,IAAyCA,MAA1C,CAAhB;EACD,CAFD;;EAIA,IAAMmC,YAAY,GAAG,SAAfA,YAAe,GAAM,CAE1B,CAFD;;EAIA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACP,IAAD,EAAOlB,KAAP,EAAiB;IACpC,YAAUkB,IAAI,CAACQ,EAAf;EACD,CAFD;;EAIA,IAAMC,UAAU,GAAG,SAAbA,UAAa,QAAmB;IAAA,IAAjBT,IAAiB,SAAjBA,IAAiB;IAAA,IAAXlB,KAAW,SAAXA,KAAW;IACpC,IAAM4B,WAAW,GAAG,CAAA3B,UAAU,QAAV,YAAAA,UAAU,CAAED,KAAZ,KAAqB,CAAzC;IACA,IAAM6B,MAAM,GAAG7B,KAAK,IAAI4B,WAAW,GAAG,CAAvB,IAA4B5B,KAAK,IAAI4B,WAAW,GAAG,CAAlE;IACA,OACE,oBAAC,OAAD;MACE,IAAI,EAAEV,IADR;MAEE,MAAM,EAAEW,MAFV;MAGE,KAAK,EAAE7B,KAHT;MAIE,mBAAmB,EAAES,mBAJvB;MAKE,OAAO,EAAER,UALX;MAME,SAAS,EAAE2B,WAAW,KAAK5B,KAN7B;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EADF;EAUD,CAbD;;EAeA,OACE,oBAAC,IAAD;IAAM,KAAK,EAAEZ,WAAW,CAAC0C,aAAzB;IAAwC,QAAQ,EAAET,QAAlD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACE,oBAAC,QAAD,CAAU,QAAV;IACE,aAAa,MADf;IAEE,4BAA4B,EAAE,KAFhC;IAGE,GAAG,EAAE1B,WAHP;IAIE,gCAAgC,EAAE,IAJpC;IAKE,sBAAsB,EAAEU,sBAAsB,CAAC0B,OALjD;IAME,iBAAiB,EAAE5B,iBANrB;IAOE,QAAQ,EAAEP,QAAQ,CAACoC,KAAT,CACR,CACE;MACEV,WAAW,EAAE;QAACW,aAAa,EAAE;UAACC,CAAC,EAAEpC;QAAJ;MAAhB;IADf,CADF,CADQ,EAMR;MACEiB,eAAe,EAAE;IADnB,CANQ,CAPZ;IAiBE,IAAI,EAAExB,IAjBR;IAkBE,UAAU,EAAEoC,UAlBd;IAmBE,aAAa,EAAEV,aAnBjB;IAoBE,YAAY,EAAEQ,YApBhB;IAqBE,qBAAqB,EAAE,EArBzB;IAsBE,YAAY,EAAED,YAtBhB;IAuBE,qBAAqB,EAAE,IAvBzB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADF,CADF;AA6BD,CA7FD;;AA+FA,eAAehC,IAAf"},"metadata":{},"sourceType":"module"}